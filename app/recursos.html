<main class="main">
  <div style="display:flex; gap:10px; margin-bottom:30px;">
    <input type="text" id="search" placeholder="Buscar recursos..." style="flex:1; padding:15px; border-radius:15px; border:1px solid #E6EFE8; outline:none;">
    <select id="catFilter" style="padding:15px; border-radius:15px; border:1px solid #E6EFE8;"><option value="">Todas</option><option value="ansiedad">Ansiedad</option><option value="meditacion">Meditación</option></select>
  </div>
  <div id="resourceGrid" style="display:grid; grid-template-columns:repeat(auto-fill, minmax(280px, 1fr)); gap:20px;"></div>
</main>

<script>
  // Lógica de carga
  async function loadResources() {
    const { data } = await window.sb.from('recursos').select('*');
    const grid = document.getElementById('resourceGrid');
    
    // Función render
    const render = (list) => {
        grid.innerHTML = list.map(r => `
            <div style="background:white; border-radius:20px; overflow:hidden; box-shadow:0 4px 15px rgba(0,0,0,0.05); cursor:pointer;" onclick="window.open('${r.url}', '_blank')">
                <div style="height:150px; background:#E8F5E9; display:flex; align-items:center; justify-content:center; font-size:3rem; color:#4F6F52;">
                    <i class="fas ${r.tipo === 'video' ? 'fa-play' : 'fa-book'}"></i>
                </div>
                <div style="padding:20px;">
                    <span style="font-size:0.7rem; background:#FEF3C7; color:#92400E; padding:3px 8px; border-radius:10px;">${r.categoria}</span>
                    <h3 style="margin:10px 0 5px 0; font-size:1.1rem;">${r.titulo}</h3>
                    <p style="color:#64748B; font-size:0.9rem;">${r.descripcion}</p>
                </div>
            </div>
        `).join('');
    };
    
    render(data);
    
    // Filtro simple
    document.getElementById('search').addEventListener('input', (e) => {
        const term = e.target.value.toLowerCase();
        render(data.filter(r => r.titulo.toLowerCase().includes(term)));
    });
  }
</script>
