<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Bitácora Mental - Plataforma integral de salud emocional y terapia online.">
  <title>Bitácora Mental - Tu salud mental, a un click</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    /* --- VARIABLES GLOBALES (Se actualizan desde Admin) --- */
    :root {
      --primary: #4F6F52;
      --primary-dark: #3E5842;
      --primary-light: #E8F3EC;
      --secondary: #A7C4B5;
      --accent: #F59E0B;
      
      --bg: #F9FBFA;
      --card-bg: #FFFFFF;
      --text-main: #1F2933;
      --text-soft: #64748B;
      
      --border: #E6EFE8;
      --radius: 16px;
      --shadow-sm: 0 4px 6px rgba(0,0,0,0.02);
      --shadow-lg: 0 10px 30px rgba(0,0,0,0.08);
      
      --font-head: 'Outfit', sans-serif;
      --font-body: 'DM Sans', sans-serif;
    }

    /* --- RESET & BASE --- */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body { font-family: var(--font-body); background: var(--bg); color: var(--text-main); line-height: 1.6; overflow-x: hidden; }
    h1, h2, h3, h4, h5 { font-family: var(--font-head); font-weight: 700; line-height: 1.2; }
    a { text-decoration: none; transition: 0.3s; }
    ul { list-style: none; }

    /* --- BANNER PROMOCIONAL --- */
    #promoBanner {
        background: var(--accent);
        color: white;
        text-align: center;
        padding: 10px 20px;
        font-weight: 700;
        font-size: 0.9rem;
        display: none; /* Se activa con JS */
        animation: slideDown 0.5s ease;
    }

    /* --- NAVBAR --- */
    .navbar { position: sticky; top: 0; background: rgba(255,255,255,0.9); backdrop-filter: blur(12px); padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; z-index: 1000; border-bottom: 1px solid rgba(0,0,0,0.05); }
    .logo { font-family: var(--font-head); font-weight: 800; font-size: 1.5rem; color: var(--primary); display: flex; align-items: center; gap: 10px; }
    
    .nav-links { display: flex; gap: 30px; align-items: center; }
    .nav-links a { color: var(--text-main); font-weight: 500; font-size: 0.95rem; }
    .nav-links a:hover { color: var(--primary); }
    
    .nav-btn-login { padding: 8px 20px; border: 2px solid var(--primary); border-radius: 50px; color: var(--primary); font-weight: 700; }
    .nav-btn-login:hover { background: var(--primary-light); }
    
    .nav-btn-cta { background: var(--primary); color: white; padding: 10px 24px; border-radius: 50px; font-weight: 700; display: flex; align-items: center; gap: 8px; box-shadow: 0 4px 15px rgba(79, 111, 82, 0.3); }
    .nav-btn-cta:hover { background: var(--primary-dark); transform: translateY(-2px); }

    /* --- HERO SECTION --- */
    .hero { padding: 80px 5% 100px; text-align: center; background: radial-gradient(circle at 50% 50%, rgba(167, 196, 181, 0.15) 0%, transparent 70%); position: relative; overflow: hidden; }
    .hero::before { content: ''; position: absolute; width: 300px; height: 300px; background: var(--primary); opacity: 0.05; filter: blur(80px); border-radius: 50%; top: -50px; left: -100px; }
    .hero::after { content: ''; position: absolute; width: 400px; height: 400px; background: var(--secondary); opacity: 0.1; filter: blur(100px); border-radius: 50%; bottom: 0; right: -100px; }

    .hero-content { position: relative; z-index: 2; max-width: 800px; margin: 0 auto; }
    .hero-badge { background: var(--primary-light); color: var(--primary); padding: 8px 24px; border-radius: 50px; font-size: 0.9rem; font-weight: 700; display: inline-flex; align-items: center; gap: 8px; margin-bottom: 30px; }
    
    .hero h1 { font-size: 3.5rem; color: var(--text-main); margin-bottom: 25px; letter-spacing: -1px; }
    .hero p { font-size: 1.25rem; color: var(--text-soft); margin-bottom: 40px; max-width: 650px; margin-left: auto; margin-right: auto; }
    
    .hero-btn { background: var(--primary); color: white; padding: 18px 40px; border-radius: 14px; font-size: 1.1rem; font-weight: 700; display: inline-flex; align-items: center; gap: 10px; transition: 0.3s; box-shadow: 0 10px 30px rgba(79, 111, 82, 0.25); }
    .hero-btn:hover { transform: translateY(-5px); box-shadow: 0 15px 35px rgba(79, 111, 82, 0.35); }

    /* --- CÓMO FUNCIONA (Estático pero estilizado) --- */
    .steps-section { padding: 100px 8%; background: white; position: relative; }
    .section-header { text-align: center; margin-bottom: 60px; max-width: 700px; margin-left: auto; margin-right: auto; }
    .section-header h2 { font-size: 2.5rem; margin-bottom: 15px; color: var(--text-main); }
    .section-header p { font-size: 1.1rem; color: var(--text-soft); }

    .steps-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; }
    .step-card { padding: 20px; text-align: center; position: relative; }
    .step-icon { width: 70px; height: 70px; background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; margin: 0 auto 25px; box-shadow: 0 10px 20px rgba(79, 111, 82, 0.2); }
    .step-card h3 { font-size: 1.4rem; margin-bottom: 15px; }
    .step-card p { color: var(--text-soft); font-size: 1rem; }

    /* --- PLANES Y PRECIOS (Dinámico) --- */
    .pricing-section { padding: 100px 8%; background: var(--bg); }
    .planes-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; align-items: start; }
    
    .plan-card { background: white; border-radius: 24px; padding: 40px 30px; box-shadow: var(--shadow-sm); border: 1px solid var(--border); transition: 0.3s; position: relative; display: flex; flex-direction: column; height: 100%; }
    .plan-card:hover { transform: translateY(-10px); box-shadow: var(--shadow-lg); }
    
    .plan-card.featured { border: 2px solid var(--primary); transform: scale(1.05); z-index: 10; box-shadow: 0 15px 40px rgba(79, 111, 82, 0.15); }
    .plan-card.featured:hover { transform: scale(1.05) translateY(-10px); }
    
    .plan-tag { position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: var(--primary); color: white; padding: 6px 16px; border-radius: 20px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
    
    .plan-name { font-size: 1.4rem; margin-bottom: 15px; color: var(--text-main); }
    .plan-price { font-size: 3rem; font-weight: 800; color: var(--primary); line-height: 1; margin-bottom: 20px; }
    .plan-period { font-size: 1rem; color: var(--text-soft); font-weight: 500; }
    
    .plan-features { margin: 25px 0 40px; flex-grow: 1; }
    .plan-features li { display: flex; align-items: flex-start; gap: 12px; margin-bottom: 12px; font-size: 0.95rem; color: var(--text-soft); }
    .plan-features i { color: var(--primary); margin-top: 4px; }
    
    .plan-btn { display: block; width: 100%; padding: 14px; text-align: center; border-radius: 12px; font-weight: 700; text-decoration: none; transition: 0.2s; background: var(--bg); color: var(--text-main); border: 1px solid var(--border); }
    .plan-card.featured .plan-btn { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 4px 15px rgba(79, 111, 82, 0.3); }
    .plan-btn:hover { filter: brightness(0.95); }

    .pricing-note { text-align: center; margin-top: 50px; background: #FFF7ED; border: 1px solid #FFEDD5; color: #9A3412; padding: 15px; border-radius: 12px; max-width: 800px; margin-left: auto; margin-right: auto; font-size: 0.9rem; }

    /* --- TESTIMONIOS (Dinámico) --- */
    .testi-section { padding: 100px 8%; background: white; }
    .testi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px; }
    
    .testi-card { background: #F8FAFC; padding: 35px; border-radius: 20px; border: 1px solid var(--border); display: flex; flex-direction: column; justify-content: space-between; }
    .testi-stars { color: #F59E0B; margin-bottom: 15px; font-size: 0.9rem; }
    .testi-text { font-size: 1.05rem; font-style: italic; color: #4B5563; margin-bottom: 25px; line-height: 1.6; }
    .testi-author { display: flex; align-items: center; gap: 15px; }
    .testi-avatar { width: 50px; height: 50px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.2rem; }
    .testi-info strong { display: block; color: var(--text-main); font-size: 1rem; }
    .testi-info span { font-size: 0.85rem; color: var(--primary); font-weight: 600; }

    /* --- CTA FINAL --- */
    .cta-final { padding: 100px 5%; text-align: center; background: linear-gradient(135deg, var(--primary) 0%, #2F4532 100%); color: white; border-radius: 0; }
    .cta-final h2 { font-size: 2.8rem; margin-bottom: 20px; }
    .cta-final p { font-size: 1.2rem; margin-bottom: 40px; opacity: 0.9; }
    .btn-cta-white { background: white; color: var(--primary); padding: 16px 40px; border-radius: 12px; font-weight: 700; font-size: 1.1rem; box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
    .btn-cta-white:hover { background: #F0FDF4; transform: translateY(-3px); }

    /* --- FOOTER --- */
    .footer { background: var(--text-main); color: white; padding: 80px 8% 30px; font-size: 0.95rem; }
    .footer-grid { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap: 50px; margin-bottom: 60px; }
    
    .footer-col h4 { color: white; margin-bottom: 25px; font-size: 1.1rem; letter-spacing: 0.5px; }
    .footer-col ul li { margin-bottom: 12px; }
    .footer-col a { color: #94A3B8; }
    .footer-col a:hover { color: white; padding-left: 5px; }
    
    .footer-copy { border-top: 1px solid rgba(255,255,255,0.1); padding-top: 30px; text-align: center; color: #64748B; font-size: 0.85rem; display: flex; justify-content: space-between; flex-wrap: wrap; gap: 20px; }

    /* --- WHATSAPP --- */
    .whatsapp-btn { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background: #25D366; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; box-shadow: 0 10px 25px rgba(37, 211, 102, 0.3); z-index: 999; transition: 0.3s; }
    .whatsapp-btn:hover { transform: scale(1.1) rotate(10deg); }

    @keyframes slideDown { from { transform: translateY(-100%); } to { transform: translateY(0); } }

    @media (max-width: 1000px) {
        .hero h1 { font-size: 2.8rem; }
        .footer-grid { grid-template-columns: 1fr 1fr; }
        .nav-links { display: none; }
    }
    @media (max-width: 600px) {
        .footer-grid { grid-template-columns: 1fr; }
        .hero { padding-top: 40px; }
        .planes-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

  <div id="promoBanner"></div>

  <nav class="navbar">
    <a href="/" class="logo">
        <i class="fas fa-brain"></i> 
        <span id="brandName">Bitácora Mental</span>
    </a>
    <div class="nav-links">
      <a href="#funciona">Cómo funciona</a>
      <a href="#precios">Planes</a>
      <a href="#testimonios">Testimonios</a>
      <a href="login.html" class="nav-btn-login">Ingresar</a>
      <a href="app/entrevista.html" class="nav-btn-cta">Empezar Gratis</a>
    </div>
  </nav>

  <section class="hero">
    <div class="hero-content">
      <div class="hero-badge">
        <i class="fas fa-heart" style="color:#EF4444"></i> 
        <span id="heroBadge">Más de 500 personas confían en nosotros</span>
      </div>
      <h1 id="heroTitle">Tu salud mental,<br>a un click de distancia</h1>
      <p id="heroSubtitle">Conecta con especialistas verificados, realiza tu seguimiento clínico y accede a recursos personalizados desde donde estés.</p>
      
      <a href="app/entrevista.html" class="hero-btn">
        <i class="fas fa-comments"></i> Iniciar Entrevista de Bienvenida
      </a>
    </div>
  </section>

  <section class="steps-section" id="funciona">
    <div class="section-header">
      <h2>Así de simple funciona</h2>
      <p>En 3 pasos estarás conectado con el apoyo emocional que necesitas.</p>
    </div>
    <div class="steps-grid">
      <div class="step-card">
        <div class="step-icon"><i class="fas fa-clipboard-list"></i></div>
        <h3>1. Entrevista Inicial</h3>
        <p>Cuéntanos tu historia y motivo de consulta para personalizar tu experiencia desde el día uno.</p>
      </div>
      <div class="step-card">
        <div class="step-icon"><i class="fas fa-user-md"></i></div>
        <h3>2. Conexión</h3>
        <p>Nuestro algoritmo te conecta con psicólogos verificados que se especializan en tu necesidad.</p>
      </div>
      <div class="step-card">
        <div class="step-icon"><i class="fas fa-chart-line"></i></div>
        <h3>3. Progreso</h3>
        <p>Accede a tu dashboard, registra tu pulso emocional semanal y prepara tus sesiones.</p>
      </div>
    </div>
  </section>

  <section class="pricing-section" id="precios">
    <div class="section-header">
      <h2>Planes para cada necesidad</h2>
      <p>Elige el nivel de acompañamiento que mejor se adapte a ti. Sin compromisos forzosos.</p>
    </div>
    
    <div class="planes-grid" id="planesContainer">
        <div style="grid-column:1/-1; text-align:center; padding:40px; color:#94A3B8;">
            <i class="fas fa-circle-notch fa-spin fa-2x"></i>
            <p>Cargando planes actualizados...</p>
        </div>
    </div>

    <div class="pricing-note">
        <i class="fas fa-info-circle"></i> <strong>Nota Importante:</strong> Los planes de asesoría incluyen sesiones con profesionales en formación bajo estricta supervisión clínica. Para terapia especializada, contamos con psicólogos colegiados.
    </div>
  </section>

  <section class="testi-section" id="testimonios">
    <div class="section-header">
      <h2>Historias que nos inspiran</h2>
      <p>Personas reales que han transformado su bienestar con nosotros.</p>
    </div>
    
    <div class="testi-grid" id="testiContainer">
        </div>
  </section>

  <section class="cta-final">
    <h2>Da el primer paso hoy</h2>
    <p>Cuidar tu salud mental nunca fue tan accesible y seguro.</p>
    <a href="app/entrevista.html" class="btn-cta-white">Comenzar Ahora</a>
  </section>

  <footer class="footer">
    <div class="footer-grid">
        <div class="footer-col">
            <h3 style="font-family:'Outfit'; font-size:1.4rem; margin-bottom:15px; display:flex; align-items:center; gap:10px;">
                <i class="fas fa-brain"></i> <span id="footerBrand">Bitácora Mental</span>
            </h3>
            <p style="color:#94A3B8; line-height:1.6; max-width:300px;">
                Plataforma integral de salud mental que conecta personas con especialistas verificados y herramientas digitales.
            </p>
        </div>
        <div class="footer-col">
            <h4>Plataforma</h4>
            <ul>
                <li><a href="#funciona">Cómo funciona</a></li>
                <li><a href="#precios">Planes y Precios</a></li>
                <li><a href="login.html">Iniciar Sesión</a></li>
                <li><a href="registro.html">Crear Cuenta</a></li>
            </ul>
        </div>
        <div class="footer-col">
            <h4>Recursos</h4>
            <ul>
                <li><a href="#">Blog de Bienestar</a></li>
                <li><a href="#">Test de Ansiedad</a></li>
                <li><a href="#">Preguntas Frecuentes</a></li>
                <li><a href="#">Centro de Ayuda</a></li>
            </ul>
        </div>
        <div class="footer-col">
            <h4>Legal</h4>
            <ul>
                <li><a href="#">Términos y Condiciones</a></li>
                <li><a href="#">Política de Privacidad</a></li>
                <li><a href="#">Política de Cookies</a></li>
                <li><a href="#">Libro de Reclamaciones</a></li>
            </ul>
        </div>
    </div>
    <div class="footer-copy">
        <span>© 2026 Bitácora Mental. Todos los derechos reservados.</span>
        <div style="display:flex; gap:15px;">
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-facebook"></i></a>
            <a href="#"><i class="fab fa-linkedin"></i></a>
        </div>
    </div>
  </footer>

  <a href="https://wa.me/51922483155" target="_blank" class="whatsapp-btn">
    <i class="fab fa-whatsapp"></i>
  </a>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="js/supabase-config.js"></script>
  <script>
    // --- LÓGICA DEL CMS DINÁMICO ---
    document.addEventListener('DOMContentLoaded', async () => {
        // 1. Verificar conexión
        if (!window.sb) {
            console.error("Supabase no inicializado");
            return;
        }

        // 2. Cargar Configuración Global (Colores y Textos Base)
        const { data: configs } = await window.sb.from('config_interfaz').select('*');
        
        if (configs) {
            configs.forEach(c => {
                const val = c.valor;
                
                // Aplicar Colores CSS
                if (c.clave === 'style_primary') document.documentElement.style.setProperty('--primary', val);
                if (c.clave === 'style_bg') document.documentElement.style.setProperty('--bg', val);
                
                // Aplicar Textos Específicos
                if (c.clave === 'brand_name') {
                    document.querySelectorAll('#brandName, #footerBrand').forEach(el => el.textContent = val);
                    document.title = val + " - Inicio";
                }
                if (c.clave === 'hero_title') document.getElementById('heroTitle').innerHTML = val.replace(/\n/g, '<br>');
                if (c.clave === 'hero_subtitle') document.getElementById('heroSubtitle').textContent = val;
                if (c.clave === 'hero_badge') document.getElementById('heroBadge').textContent = val;

                // Banner Promo
                if (c.clave === 'promo_active' && val === 'true') {
                    const banner = document.getElementById('promoBanner');
                    const textConfig = configs.find(x => x.clave === 'promo_text');
                    banner.style.display = 'block';
                    banner.textContent = textConfig ? textConfig.valor : '¡Oferta!';
                }
            });
        }

        // 3. Cargar PLANES desde la Base de Datos (Dinámico)
        const { data: planes, error: errPlanes } = await window.sb
            .from('web_planes')
            .select('*')
            .eq('visible', true)
            .order('orden', { ascending: true });

        const planesContainer = document.getElementById('planesContainer');
        
        if (planes && planes.length > 0) {
            planesContainer.innerHTML = planes.map(plan => `
                <div class="plan-card ${plan.es_recomendado ? 'featured' : ''}">
                    ${plan.es_recomendado ? '<div class="plan-tag">RECOMENDADO</div>' : ''}
                    
                    <h3 class="plan-name">${plan.nombre}</h3>
                    <div class="plan-price">S/ ${plan.precio}<span class="plan-period"> ${plan.periodo}</span></div>
                    
                    <ul class="plan-features">
                        ${(plan.features || []).map(feat => `
                            <li><i class="fas fa-check-circle"></i> ${feat}</li>
                        `).join('')}
                    </ul>
                    
                    <a href="registro.html" class="plan-btn">${plan.btn_texto || 'Elegir Plan'}</a>
                </div>
            `).join('');
        } else {
            // Fallback si no hay planes o hay error
            planesContainer.innerHTML = `<p style="text-align:center; width:100%;">No hay planes disponibles por el momento.</p>`;
        }

        // 4. Cargar TESTIMONIOS (Dinámico)
        const { data: testimonios } = await window.sb.from('web_testimonios').select('*');
        const testiContainer = document.getElementById('testiContainer');

        if (testimonios && testimonios.length > 0) {
            testiContainer.innerHTML = testimonios.map(t => `
                <div class="testi-card">
                    <div>
                        <div class="testi-stars">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="testi-text">"${t.texto}"</p>
                    </div>
                    <div class="testi-author">
                        <div class="testi-avatar">${t.autor.charAt(0)}</div>
                        <div class="testi-info">
                            <strong>${t.autor}</strong>
                            <span>${t.detalle || 'Usuario verificado'}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }
    });
  </script>
</body>
</html>
